---
import { Icon } from 'astro-icon/components';
import MobileNavLink from './MobileNavLink.astro';
import { Button } from '@/components/ui/button';
import SocialMediaButtonGroup from './ui/SocialMediaButtonGroup.astro';

const {links} = Astro.props
---

<div class="flex justify-center items-center">
	<button class="rounded-full border-2 border-white p-4 group transition hover:border-accent-magenta" id="hamburger-menu"
		><Icon class="text-xl text-white group-hover:text-accent-magenta" name={'mdi:apps'} /></button
	>
</div>

<dialog
	id="mobile-nav"
	class="h-screen w-screen lg:max-w-screen-xl rounded-xl bg-text-primary text-background-primary"
>
	<div class="flex justify-between items-center p-4">
		<img
			class="w-6 object-cover"
			src="https://iiyjiikbtsckevydbcsj.supabase.co/storage/v1/object/public/website-assets/branding/logos/SPAP%20Logos/Icon/PNG/Black_Icon%20Lockup_SPAP.png"
		/>
		<button
			id="close-nav"
			class="ml-auto block outline-none w-fit text-xl lg:text-4xl hover:text-accent-pop hover:rotate-180 duration-200 ease-linear"
			><Icon name={'mdi:close'} /></button
		>
	</div>

	<ul class="flex flex-col items-center gap-16 text-left px-4 mt-8">
		{links.map((link, index) => {
			if(link.active) {
				return <li class="w-full">
					<MobileNavLink href={link.href} name={link.name} />
				</li>
			}
		})}
		<!--<li class="w-full">-->
		<!--	<MobileNavLink href="/" name="Home" />-->
		<!--</li>-->
		<!--<li class="w-full">-->
		<!--	<MobileNavLink href="/#featured-projects" name="Featured Projects" />-->
		<!--</li>-->
		<!--<li class="w-full">-->
		<!--	<MobileNavLink href="/contact" name="Contact" />-->
		<!--</li>-->
		<!--<li class="w-full">-->
		<!--	<MobileNavLink-->
		<!--		href="https://newsletter.spaptechnology.com/subscribe"-->
		<!--		name="Newsletter"-->
		<!--	/>-->
		<!--</li>-->
		<!--<li class="lg:w-1/5 ml-auto">-->
		<!--	<SocialMediaButtonGroup color="accent-primary" />-->
		<!--</li>-->
	</ul>
</dialog>

<script>
	const openNav = () => {
		const mobileNav = document.getElementById(
			'mobile-nav'
		) as HTMLDialogElement;
		mobileNav.showModal();
	};

	document
		.getElementById('hamburger-menu')
		?.addEventListener('click', () => openNav());

	document.getElementById('close-nav')?.addEventListener('click', () => {
		const mobileNav = document.getElementById(
			'mobile-nav'
		) as HTMLDialogElement;
		mobileNav.close();
	});
</script>
