---
import RootLayout from "../../../layouts/RootLayout.astro";
import { supabase } from '@/db/supabase';
import AudioProjectShowcase from '@/components/react/AudioProjectShowcase'
import CreditsContainer from'@/components/astro/CreditsContainer.astro'

// Fetch the data server-side
const { data, error } = await supabase
    .from('pro_audio_projects')
    .select('*');

if (error) {
    throw new Error('Failed to fetch projects: ' + error.message);
}
---
<RootLayout>
    <section class="w-screen p-4">
        <h1 class="text-7xl">Pro Audio</h1>
       <AudioProjectShowcase client:load data={data} />
    </section>
    <section>
        <h2 class="text-5xl">Playlists & Credits</h2>
    <CreditsContainer/>

    </section>
</RootLayout>
